{
curl https://raw.githubusercontent.com/sjhgvr/oisd/main/rpz_big.txt | sed '0,/^ NS localhost.$/d' | grep -v "*\|\/\|#" | awk '{print $1}' > /tmp/domain.list
curl https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts | sed '0,/^# http:\/\/stevenblack.com$/d' | grep -v "*\|\/\|#" | awk '{print $2}' >> /tmp/domain.list
curl https://raw.githubusercontent.com/PolishFiltersTeam/KADhosts/master/KADhosts.txt | sed '0,/^#@ >/d' | grep -v "*\|\/\|#" | awk '{print $2}' >> /tmp/domain.list
curl https://raw.githubusercontent.com/FadeMind/hosts.extras/master/add.Spam/hosts | grep -v "*\|\/\|#" | awk '{print $2}' >> /tmp/domain.list
curl https://v.firebog.net/hosts/static/w3kbl.txt | grep -v "*\|\/\|#" >> /tmp/domain.list
curl https://adaway.org/hosts.txt | grep "^127.0.0.1" | awk '{print $2}' >> /tmp/domain.list
curl https://v.firebog.net/hosts/AdguardDNS.txt | grep -v "*\|\/\|#" >> /tmp/domain.list
curl https://v.firebog.net/hosts/Admiral.txt | grep -v "*\|\/\|#" >> /tmp/domain.list
curl https://v.firebog.net/hosts/Easyprivacy.txt | grep -v "*\|\/\|#" >> /tmp/domain.list
curl https://v.firebog.net/hosts/Prigent-Ads.txt | grep -v "*\|\/\|#" >> /tmp/domain.list
curl https://raw.githubusercontent.com/anudeepND/blacklist/master/adservers.txt | grep -v "*\|\/\|#" | awk '{print $2}' >> /tmp/domain.list
curl https://raw.githubusercontent.com/ABPindo/indonesianadblockrules/master/subscriptions/rpz.txt | grep -v "*\|\/\|#" | awk '{print $1}' >> /tmp/domain.list
curl https://raw.githubusercontent.com/justdomains/blocklists/master/lists/adguarddns-justdomains.txt | grep -v "*\|\/\|#" >> /tmp/domain.list
curl https://raw.githubusercontent.com/justdomains/blocklists/master/lists/easylist-justdomains.txt | grep -v "*\|\/\|#" >> /tmp/domain.list
curl https://raw.githubusercontent.com/justdomains/blocklists/master/lists/easyprivacy-justdomains.txt | grep -v "*\|\/\|#" >> /tmp/domain.list
curl https://raw.githubusercontent.com/justdomains/blocklists/master/lists/nocoin-justdomains.txt | grep -v "*\|\/\|#" >> /tmp/domain.list
curl "https://pgl.yoyo.org/adservers/serverlist.php?hostformat=hosts&showintro=0" | grep -v "*\|\/\|#" | awk '{print $2}' >> /tmp/domain.list

dos2unix /tmp/domain.list
cat /tmp/domain.list | sort | uniq > /tmp/uniq.list
sed -i '/^[[:space:]]*$/d' /tmp/uniq.list
cat /tmp/uniq.list | awk '{print $1 "\tIN\tCNAME\t*."}' > /etc/bind/bl.dat
SOAF="/etc/bind/bl.db";
DATE=$(date +%Y%m%d);
curr=$(sed -n '/^@/,/^[^;]*)/H;${;x;s/.*@[^(]*([^0-9]*//;s/[^0-9].*//;p;}' $SOAF);
prefix=${curr::-2};
if [ "$DATE" -eq "$prefix" ];
then
num=${curr: -2};
num=$((10#$num + 1));
serial="${DATE}$(printf '%02d' $num )";
else
serial="${DATE}00";
fi;
sed -i "s/[0-9]\{10\}/${serial}/g" $SOAF;
/usr/sbin/rndc reload block
echo $serial
}

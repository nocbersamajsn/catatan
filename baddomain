rm -rf /tmp/db.dom /tmp/block.list
echo "localhost.jsn.net.id" > /tmp/db.dom
curl https://raw.githubusercontent.com/nocbersamajsn/catatan/main/domains_hosts.txt | grep ^195 | awk '{print $2 }' >> /tmp/db.dom
curl https://raw.githubusercontent.com/blocklistproject/Lists/master/malware.txt | grep -v "*\|\/\|#" | awk '{print $2}' >> /tmp/db.dom
curl https://raw.githubusercontent.com/blocklistproject/Lists/master/ransomware.txt | grep -v "*\|\/\|#" | awk '{print $2}' >> /tmp/db.dom
curl https://raw.githubusercontent.com/blocklistproject/Lists/master/abuse.txt | grep -v "*\|\/\|#" | awk '{print $2}' >> /tmp/db.dom
curl https://v.firebog.net/hosts/RPiList-Malware.txt | grep "||" | sed 's/||//g' |  sed 's/[\^]*//g' >> /tmp/db.dom
curl "https://gitlab.com/quidsup/notrack-blocklists/-/raw/master/malware.hosts?ref_type=heads" | grep ^127 | awk '{print $2 }'  >> /tmp/db.dom
curl "https://raw.githubusercontent.com/DandelionSprout/adfilt/master/Alternate%20versions%20Anti-Malware%20List/AntiMalwareHosts.txt" | grep ^127.0.0.1 | awk '{print $2}' >> /tmp/db.dom
curl https://osint.digitalside.it/Threat-Intel/lists/latestdomains.txt | grep -v "*\|\/\|#" >> /tmp/db.dom
curl https://lists.cyberhost.uk/malware.txt | grep -v "*\|\/\|#" | sed '/^[[:space:]]*$/d' >> /tmp/db.dom
curl https://rescure.me/rescure_domain_blacklist.txt | grep -v "*\|\/\|#" >> /tmp/db.dom
curl https://raw.githubusercontent.com/cenk/trcert-malware/main/trcert-domains.txt | grep -v "*\|\/\|#" >> /tmp/db.dom
curl https://raw.githubusercontent.com/ttc-cert/TTC-CERT_blocklist_recommended/master/domain_blocklist_recommended.txt | grep -v "*\|\/\|#" >> /tmp/db.dom
curl https://threatfox.abuse.ch/downloads/hostfile | grep ^127.0.0.1 | grep -v "*\|\/\|#" | awk '{print $2 }' >> /tmp/db.dom
curl https://raw.githubusercontent.com/stamparm/aux/master/maltrail-malware-domains.txt >> /tmp/db.dom
curl https://gitlab.com/quidsup/notrack-blocklists/raw/master/notrack-malware.txt | grep -v "*\|\/\|#" | awk '{print $1}' >> /tmp/db.dom
curl https://osint.digitalside.it/Threat-Intel/lists/latestdomains.txt | grep -v "*\|\/\|#" >> /tmp/db.dom
curl https://urlhaus.abuse.ch/downloads/hostfile/ | grep ^127.0.0.1 | grep -v "*\|\/\|#" | awk '{print $2 }' >> /tmp/db.dom
curl "https://azorult-tracker.net/api/list/domain?format=plain"  >> /tmp/db.dom
curl https://raw.githubusercontent.com/FiltersHeroes/KADhosts/master/KADhosts.txt | grep ^0.0.0.0 | grep -v "*\|\/\|#" | awk '{print $2 }' >> /tmp/db.dom
curl https://phishing.army/download/phishing_army_blocklist_extended.txt | grep -v "*\|\/\|#" >> /tmp/db.dom


if ! command -v dos2unix &> /dev/null; then echo "tidak ada dos2unix "; apt install -y dos2unix; fi
dos2unix /tmp/db.dom
cat /tmp/db.dom | sort | uniq | grep -v -E "^[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+$" > /tmp/block.list
sed -i '/^[[:space:]]*$/d' /tmp/block.list
sed -i '/^-/d' /tmp/block.list
sed -i 's/\.*$//g' /tmp/block.list
cat /tmp/block.list | awk '{ print $1 "." }' > /opt/dnsdist/block.list
